{"version":3,"sources":["methods.windows.ts"],"names":["NativeModules","checkLocationAccuracy","openLimitedPhotoLibraryPicker","requestLocationAccuracy","uniq","NativeModule","RNPermissions","openSettings","OpenSettings","check","permission","Check","request","Request","checkNotifications","status","CheckNotifications","settings","checkMultiple","permissions","output","dedup","Promise","all","map","requestMultiple","index","length","methods","requestNotifications"],"mappings":"AAAA,SAAQA,aAAR,QAA4B,cAA5B;AAGA,SACEC,qBADF,EAEEC,6BAFF,EAGEC,uBAHF,QAIO,8BAJP;AAKA,SAAQC,IAAR,QAAmB,SAAnB;AAEA,MAAMC,YAKL,GAAGL,aAAa,CAACM,aALlB;;AAOA,eAAeC,YAAf,GAA6C;AAC3C,QAAMF,YAAY,CAACG,YAAb,EAAN;AACD;;AAED,SAASC,KAAT,CAAeC,UAAf,EAAkE;AAChE,SAAOL,YAAY,CAACM,KAAb,CAAmBD,UAAnB,CAAP;AACD;;AAED,SAASE,OAAT,CAAiBF,UAAjB,EAAoE;AAClE,SAAOL,YAAY,CAACQ,OAAb,CAAqBH,UAArB,CAAP;AACD;;AAED,eAAeI,kBAAf,GAAoE;AAClE,SAAO;AAACC,IAAAA,MAAM,EAAE,MAAMV,YAAY,CAACW,kBAAb,EAAf;AAAkDC,IAAAA,QAAQ,EAAE;AAA5D,GAAP;AACD;;AAED,eAAeC,aAAf,CACEC,WADF,EAEgD;AAG9C,QAAMC,MAAuB,GAAG,EAAhC;AACA,QAAMC,KAAK,GAAGjB,IAAI,CAACe,WAAD,CAAlB;AAEA,QAAMG,OAAO,CAACC,GAAR,CACJF,KAAK,CAACG,GAAN,CAAU,MAAOd,UAAP,IAAiC;AACzCU,IAAAA,MAAM,CAACV,UAAD,CAAN,GAAqB,MAAMD,KAAK,CAACC,UAAD,CAAhC;AACD,GAFD,CADI,CAAN;AAMA,SAAOU,MAAP;AACD;;AAED,eAAeK,eAAf,CACEN,WADF,EAEgD;AAG9C,QAAMC,MAAuB,GAAG,EAAhC;AACA,QAAMC,KAAK,GAAGjB,IAAI,CAACe,WAAD,CAAlB;;AAEA,OAAK,IAAIO,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGL,KAAK,CAACM,MAAlC,EAA0CD,KAAK,EAA/C,EAAmD;AACjD,UAAMhB,UAAqB,GAAGW,KAAK,CAACK,KAAD,CAAnC;AACAN,IAAAA,MAAM,CAACV,UAAD,CAAN,GAAqB,MAAME,OAAO,CAACF,UAAD,CAAlC;AACD;;AAED,SAAOU,MAAP;AACD;;AAED,OAAO,MAAMQ,OAAiB,GAAG;AAC/BnB,EAAAA,KAD+B;AAE/BR,EAAAA,qBAF+B;AAG/BiB,EAAAA,aAH+B;AAI/BJ,EAAAA,kBAJ+B;AAK/BZ,EAAAA,6BAL+B;AAM/BK,EAAAA,YAN+B;AAO/BK,EAAAA,OAP+B;AAQ/BT,EAAAA,uBAR+B;AAS/BsB,EAAAA,eAT+B;AAU/BI,EAAAA,oBAAoB,EAAEf;AAVS,CAA1B","sourcesContent":["import {NativeModules} from 'react-native';\nimport type {Contract} from './contract';\nimport type {NotificationsResponse, Permission, PermissionStatus} from './types';\nimport {\n  checkLocationAccuracy,\n  openLimitedPhotoLibraryPicker,\n  requestLocationAccuracy,\n} from './unsupportedPlatformMethods';\nimport {uniq} from './utils';\n\nconst NativeModule: {\n  Check: (permission: Permission) => Promise<PermissionStatus>;\n  CheckNotifications: () => Promise<PermissionStatus>;\n  Request: (permission: Permission) => Promise<PermissionStatus>;\n  OpenSettings: () => Promise<void>;\n} = NativeModules.RNPermissions;\n\nasync function openSettings(): Promise<void> {\n  await NativeModule.OpenSettings();\n}\n\nfunction check(permission: Permission): Promise<PermissionStatus> {\n  return NativeModule.Check(permission);\n}\n\nfunction request(permission: Permission): Promise<PermissionStatus> {\n  return NativeModule.Request(permission);\n}\n\nasync function checkNotifications(): Promise<NotificationsResponse> {\n  return {status: await NativeModule.CheckNotifications(), settings: {}};\n}\n\nasync function checkMultiple<P extends Permission[]>(\n  permissions: P,\n): Promise<Record<P[number], PermissionStatus>> {\n  type Output = Record<P[number], PermissionStatus>;\n\n  const output: Partial<Output> = {};\n  const dedup = uniq(permissions);\n\n  await Promise.all(\n    dedup.map(async (permission: P[number]) => {\n      output[permission] = await check(permission);\n    }),\n  );\n\n  return output as Output;\n}\n\nasync function requestMultiple<P extends Permission[]>(\n  permissions: P,\n): Promise<Record<P[number], PermissionStatus>> {\n  type Output = Record<P[number], PermissionStatus>;\n\n  const output: Partial<Output> = {};\n  const dedup = uniq(permissions);\n\n  for (let index = 0; index < dedup.length; index++) {\n    const permission: P[number] = dedup[index];\n    output[permission] = await request(permission);\n  }\n\n  return output as Output;\n}\n\nexport const methods: Contract = {\n  check,\n  checkLocationAccuracy,\n  checkMultiple,\n  checkNotifications,\n  openLimitedPhotoLibraryPicker,\n  openSettings,\n  request,\n  requestLocationAccuracy,\n  requestMultiple,\n  requestNotifications: checkNotifications,\n};\n"]}